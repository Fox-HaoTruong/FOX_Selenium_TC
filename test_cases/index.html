<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>FS Selenium | Test Cases</title>
</head>

<body>
<script>
	var sort = [];
	(async () => {
		const response = await fetch('https://api.github.com/repos/w100frt/FOX_Selenium_TC/contents/test_cases', 
		{
			headers : { 
				'Content-Type': 'application/json',
				'Accept': 'application/json'
			}
		})
		const data = await response.json();
		let htmlString = '<h1>Selenium Test Cases</h1><ul style="list-style-type:none;">';
		for (let file of data) {
			if (!file.name.includes("index.html")) {
				if (!file.name.includes("legacy")) {
					const tc_file = await fetch(file.download_url);
					const tc = await tc_file.json();
					sort.push(tc.testId);
					sort.sort(function(a, b){return a-b});
					//console.log(sort);
					//htmlString += `<li><a href="${file.name}">${tc.testId}</a> - ${tc.testCase}</li>`;
				} 
				//else 
				//	htmlString += `<li><a href="${file.name}">${file.name}</a></li>`;
			}
		}
		
		for (let s of sort) {
			htmlString += `<li><a href="https://codyphillips5.github.io/FOX_Selenium_TC/test_cases/${s}.json">${s}</a> - ${tc.testCase}</li>`;
		}

		htmlString += '</ul><a href = "/FOX_Selenium_TC">Go back to FS Selenium Directory</a>';
		document.getElementsByTagName('body')[0].innerHTML = htmlString;
	})()
</script>
</body>
</html>